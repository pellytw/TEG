<%= form_for(@persona, :html => { :class => "form-horizontal" }) do |f| %>
  <% if @persona.errors.any? %>
    <div class="alert alert-danger alert-dismissable">
      <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
      <h4>No se pudo guardar el formulario, tiene los siguientes errores:</h4>

      <ul>
      <% @persona.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <% @tipo_roles = ["Alumno","Docente","Auxiliar de educación"] %>

  </br>
  <legend>Datos personales</legend>

  <div class="form-group">
    <%= f.label :nombres, :class => "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :nombres, :class => "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :apellidos, :class => "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :apellidos, :class => "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :tipo_documento_id, :class => "col-sm-2 control-label" %>
    <div class="col-sm-4">
      <%= f.collection_select(:tipo_documento_id, TipoDocumento.all, :id, :nombre) %>
    </div>
    <%= f.label :nro_documento, :class => "col-sm-2 control-label" %>
    <div class="col-sm-4">
      <%= f.text_field :nro_documento, :class => "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :calle, :class => "col-sm-2 control-label" %>
    <div class="col-sm-4">
      <%= f.text_field :calle, :class => "form-control" %>
    </div>
    <%= f.label :nro_calle, :class => "col-sm-2 control-label" %>
    <div class="col-sm-4">
      <%= f.text_field :nro_calle, :class => "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :piso, :class => "col-sm-2 control-label" %>
    <div class="col-sm-4">
      <%= f.text_field :piso, :class => "form-control" %>
    </div>
    <%= f.label :depto, :class => "col-sm-2 control-label" %>
    <div class="col-sm-4">
      <%= f.text_field :depto, :class => "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :localidad_id, :class => "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.collection_select(:localidad_id, Localidad.all, :id, :nombre) %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :estado_civil_id, :class => "col-sm-2 control-label" %>
    <div class="col-sm-4">
      <%= f.collection_select(:estado_civil_id, EstadoCivil.all, :id, :nombre) %>
    </div>
     <%= f.label :sexo_id, :class => "col-sm-2 control-label" %>
    <div class="col-sm-4">
      <%= f.collection_select(:sexo_id, Sexo.all, :id, :nombre) %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :fecha_nacimiento, :class => "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.date_select :fecha_nacimiento, :class => "form-control" %>
    </div>
  </div> 
  <div class="form-group">
    <%= f.label :telefono_contacto, "Teléfono de contacto", :class => "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :telefono_contacto, :class => "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :email, "Correo electrónico", :class => "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :email, :class => "form-control" %>
    </div>
  </div>

  </br>   
  <legend>Datos establecimiento educativo</legend>

  <div class="form-group">
    <%= f.label "Establecimientos", :class => "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :establecimiento_tokens, "data-pre" => @persona.establecimientos.map(&:attributes).to_json, :class => "form-control" %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :tipo_gestion_id, "Tipo de gestión", :class => "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.collection_select(:tipo_gestion_id, TipoGestion.all, :id, :nombre) %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :servicio_transporte, "Servicio de transporte que utiliza", :class => "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :servicio_transporte, :class => "form-control" %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :rol, "Condición", :class => "col-sm-2 control-label" %>
    <div class="col-sm-10">
       <select name="persona[rol]" id="persona_rol">
            <% @tipo_roles.each do |tp| %>
              <% if @persona.rol == tp %>
                <option selected="selected" value="<%=tp%>"><%=tp%></option>
              <% else %>
                <option value="<%=tp%>"><%=tp%></option>
              <% end %>
            <% end %>
        </select>
    </div>
  </div>

  </br>
  <fieldset id="alumno">
    <legend>Alumno</legend>
    <div class="form-group">
      <%= f.label :grado_anio_alumno, "Grado/Año", :class => "col-sm-2 control-label" %>
      <div class="col-sm-4">
        <%= f.text_field :grado_anio_alumno, :class => "form-control" %>
      </div>
      <%= f.label :regular, "Marque si es alumno regular", :class => "col-sm-2 control-label" %>
      <div class="col-sm-4">
        <%= f.check_box :regular %>
      </div>
    </div>    
  </fieldset>

  </br>   
  <fieldset id="docente">
    <legend>Docente</legend>
    <div class="form-group">
      <%= f.label :activo_pasivo_docente, "Marque si es docente activo", :class => "col-sm-2 control-label" %>
      <div class="col-sm-4">
        <%= f.check_box :activo_pasivo_docente, :id => "check_activo_pasivo_docente" %>
      </div>
      <%= f.label :frente_alumnos, "Marque si cumple su función frente a grupo de alumnos", :class => "col-sm-2 control-label" %>
      <div class="col-sm-4">
        <%= f.check_box :frente_alumnos, :id => "check_frente_alumnos" %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label :grado_docente, "Grado", :class => "col-sm-2 control-label" %>
      <div class="col-sm-4">
        <%= f.text_field :grado_docente, :id => "input_grado_docente", :class => "form-control" %>
      </div>
      <%= f.label :turno_docente, "Turno", :class => "col-sm-2 control-label" %>
      <div class="col-sm-4">
        <%= f.text_field :turno_docente, :id => "input_turno_docente", :class => "form-control" %>
      </div>
    </div>
  </fieldset>

  </br>
  <fieldset id="auxiliar">
    <legend>Auxiliar de educación</legend>
    <div class="form-group">
      <%= f.label :activo_pasivo_aux, "Marque si es auxiliar activo", :class => "col-sm-2 control-label" %>
      <div class="col-sm-4">
        <%= f.check_box :activo_pasivo_aux, :id => "check_activo_pasivo_aux" %>
      </div>
      <%= f.label :lugar_auxiliares, "Lugar donde cumple su función", :class => "col-sm-2 control-label" %>
      <div class="col-sm-4">
        <%= f.text_field :lugar_auxiliares, :id => "input_lugar_auxiliares", :class => "form-control" %>
      </div>
    </div>
  </fieldset>



  </br></br></br>
  <div class="form-group">
    <div class="text-center">
      <%= f.submit :class => "btn btn-primary", :value => "Guardar" %>
      <%= link_to personas_path, :class => 'btn btn-default' do %>
        <span class="glyphicon glyphicon-list-alt"></span>
        Atrás
      <% end %>
    </div>
  </div>
<% end %>
